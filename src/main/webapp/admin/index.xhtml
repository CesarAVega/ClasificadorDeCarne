<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Administración Red Neuronal</title>
        <style type="text/css">
            body{
                background: mediumseagreen;
            }
                
            #p_dataTableid{
                margin-top: 80px;
            }
        </style>
    </h:head>
    <body>
        <h:form id="adminRedNeuronal" style="background: mediumseagreen" enctype="multipart/form-data">
            
            <!--Encabezado de la pagina-->
            <p:layoutUnit position="north" resizable = "false" size="500" minSize="500" maxSize="500" style="text-align: center;">
                <p:panel>
                    <h:outputText value="Administración del contenido de la red neuronal" style="font-size: larger" />    
                </p:panel>
                    
            </p:layoutUnit>  
            <!--panel central contiene la información de la red neuronal que se encuentra guardad en el archivo .nnet-->
            <p:layoutUnit position="center" resizable = "true" size="500">                    
                <h:panelGrid columns="2" cellpadding="5">
                    <p:column>
                        <!--Columna 1 información de la red Neuronal-->
                        <h:panelGrid columns="1" cellpadding="5">
                            <!--Fila 1 encabezado-->
                            <h:outputText value="Información de la Red Neuronal Base" />
                            <!--Fila 2 información de la red Neuronla-->            
                            <h:panelGrid columns="2" cellpadding="5">                                
                                
                                <h:outputText value="Archivo: "/>
                                <h:outputText value="myMlPerceptron.nnet"/>
                                    
                                <h:outputText value="Porcentaje efecitividad: "/>
                                <h:outputText value="#{beanAdminRedNeuronal.nnet.porcentajeEfectividad}"/>
                                    
                                <h:outputText value="Función de transferencia: "/>
                                <h:outputText value="#{beanAdminRedNeuronal.nnet.transferFunctionType}"/>
                                    
                                <h:outputText value="Número de datos de entrada: "/> 
                                <h:outputText value="#{beanAdminRedNeuronal.nnet.input}"/>
                                    
                                <h:outputText value="Número de datos de salida: "/>
                                <h:outputText value="#{beanAdminRedNeuronal.nnet.output}"/>
                                    
                                <h:outputText value="Número de neuronas en capa oculta: "/>
                                <h:outputText value="#{beanAdminRedNeuronal.nnet.k}"/>                                                                
                            </h:panelGrid>
                            <!--Fila 3 datos de la Red Nueronal--> 
                            <h:panelGrid columns="2" cellpadding="5">
                                <p:commandButton value="Graficar" update="adminRedNeuronal" oncomplete="PF('Graficar').show()" />
                                <p:commandButton value="Datos" update="adminRedNeuronal" oncomplete="PF('DataRed').show()" />    
                            </h:panelGrid>
                                
                        </h:panelGrid>              
                    </p:column>
                    <p:column>
                        <!-- Grid base columna 2-->
                        <h:panelGrid  columns="1" cellpadding="5">
                            
                            <h:outputText value="Administración de la Base de datos" />
                            <p:tabView orientation="left">
                                <p:tab title="Localidad">
                                    <p:toolbar >
                                        <f:facet name="right">
                                            <p:commandButton type="button" value="help" icon="ui-icon-help" onclick="PF('helpLocalidad').show()"/>                                            
                                        </f:facet>                                        
                                    </p:toolbar>
                                    <h:panelGrid columns="3" cellpadding="5">                                        
                                        <p:outputLabel for="nuevaLocalidad" value="Nueva Localidad: " />
                                        <p:inputText id="nuevaLocalidad" value="#{beanAdminRedNeuronal.descripcion}" required="true"/>                                        
                                        <p:column>
                                            <p:commandButton value="Submit" actionListener="#{beanAdminRedNeuronal.insertLocalidad}" 
                                                             update=":adminRedNeuronal" oncomplete="PF('messagesOK').show()">
                                                                 
                                                <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />  
                                            </p:commandButton>
                                        </p:column>
                                    </h:panelGrid>
                                </p:tab>      
                                    
                                <p:tab title="Grupo Racial">
                                    <p:toolbar >
                                        <f:facet name="right">
                                            <p:commandButton type="button" value="help" icon="ui-icon-help" onclick="PF('helpGrupoRacial').show()"/>                                            
                                        </f:facet>                                        
                                    </p:toolbar>
                                    <h:panelGrid columns="3" cellpadding="5">                                        
                                        <p:outputLabel for="nuevoGrupoRacial" value="Nuevo Grupo Racial: " />
                                        <p:inputText id="nuevoGrupoRacial" value="#{beanAdminRedNeuronal.descripcion}" required="true"/>                                        
                                        <p:column>
                                            <p:commandButton value="Submit" actionListener="#{beanAdminRedNeuronal.insertGrupoRacial}"  
                                                             update=":adminRedNeuronal" oncomplete="PF('messagesOK').show()">       
                                                <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />    
                                            </p:commandButton>
                                        </p:column>
                                    </h:panelGrid>
                                </p:tab>   
                                    
                                <p:tab title="Tipo">
                                    <p:toolbar >
                                        <f:facet name="right">
                                            <p:commandButton type="button" value="help" icon="ui-icon-help" onclick="PF('helpTipo').show()"/>                                            
                                        </f:facet>                                        
                                    </p:toolbar>
                                    <h:panelGrid columns="3" cellpadding="5">                                        
                                        <p:outputLabel for="nuevoTipo" value="Nuevo Tipo: " />
                                        <p:inputText id="nuevoTipo" value="#{beanAdminRedNeuronal.descripcion}" required="true"/>                                        
                                        <p:column>
                                            <p:commandButton value="Submit" actionListener="#{beanAdminRedNeuronal.insertTipo}" 
                                                             update=":adminRedNeuronal" oncomplete="PF('messagesOK').show()">       
                                                <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" /> 
                                            </p:commandButton>
                                        </p:column>
                                    </h:panelGrid>
                                </p:tab>   
                                    
                                <p:tab title="Sistema">
                                    <p:toolbar >
                                        <f:facet name="right">
                                            <p:commandButton type="button" value="help" icon="ui-icon-help" onclick="PF('helpSistema').show()"/>                                            
                                        </f:facet>                                        
                                    </p:toolbar>
                                    <h:panelGrid columns="3" cellpadding="5">                                        
                                        <p:outputLabel for="nuevaSistema" value="Nuevo Sistema: " />
                                        <p:inputText id="nuevaSistema" value="#{beanAdminRedNeuronal.descripcion}" required="true"/>                                        
                                        <p:column>
                                            <p:commandButton value="Submit" actionListener="#{beanAdminRedNeuronal.insertSistema}" 
                                                             update=":adminRedNeuronal" oncomplete="PF('messagesOK').show()">       
                                                <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </p:column>
                                    </h:panelGrid>
                                </p:tab>   
                                    
                                <p:tab title="Calidad">
                                    <p:toolbar >
                                        <f:facet name="right">
                                            <p:commandButton type="button" value="help" icon="ui-icon-help" onclick="PF('helpCalidad').show()"/>                                            
                                        </f:facet>                                        
                                    </p:toolbar>
                                    <h:panelGrid columns="3" cellpadding="5">                                        
                                        <p:outputLabel for="nuevaCalidad" value="Nueva Calidad: " />
                                        <p:inputText id="nuevaCalidad" value="#{beanAdminRedNeuronal.descripcion}" required="true"/>                                        
                                        <p:column>
                                            <p:commandButton value="Submit" actionListener="#{beanAdminRedNeuronal.insertCalidad}" 
                                                             update=":adminRedNeuronal" oncomplete="PF('messagesOK').show()">
                                                <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
                                            </p:commandButton>                                                                
                                        </p:column>
                                    </h:panelGrid>
                                </p:tab>   
                                    
                            </p:tabView>
                        </h:panelGrid>
                    </p:column>
                        
                </h:panelGrid>                    
            </p:layoutUnit>                
            
            <p:layoutUnit position="south" style="text-align: center" size="300">
                <p:panel >
                    <p:commandButton value="Entrenamiento" oncomplete="pages('entrenarRN.xhtml')" />    
                </p:panel>
                
                
            </p:layoutUnit>
            
                
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
            </p:confirmDialog>    
            <!--===========================CUADROS DE DIALOGO=============================-->
            
            <p:dialog header="Dato ingresado" widgetVar="messagesOK" modal="true" showEffect="clip" hideEffect="clip" >
                <h:panelGrid columns="2" cellpadding="5">                   
                    <p:outputLabel value="Su dato se a ingresado con exito con el ID: " />
                    <p:outputLabel value="#{beanAdminRedNeuronal.id}" />
                </h:panelGrid>                                    
            </p:dialog>
            
            <p:dialog header="Datos de la Red Neuronal" widgetVar="Graficar" modal="true" showEffect="fade" hideEffect="fade" resizable="true" width = "850" height="500">
                <h:panelGrid columns="1" cellpadding="5">
                    <p:column>
                        <p:outputLabel value="Grafica" />
                        <p:chart type="line" model="#{beanAdminRedNeuronal.lineModel}" style="width:800px;height:400px" rendered="#{beanAdminRedNeuronal.lineModel != null}" />                            
                        <p:commandButton value="Aceptar" oncomplete="PF('Graficar').hide()" style="align-self: baseline "/>
                    </p:column>                    
                </h:panelGrid>                                    
            </p:dialog>
                
            <p:dialog header="Datos de la Red Neuronal" widgetVar="DataRed" modal="true" showEffect="fade" hideEffect="fade" resizable="true" width = "1200" height="600">
                <h3>Export Page Data Only</h3>
                <h:commandLink>
                    <p:graphicImage library="images" name="excel.png" />
                    <p:dataExporter type="xls" target="tbl" fileName="data" pageOnly="true"/>
                </h:commandLink>
                    
                <h:commandLink>
                    <p:graphicImage library="images" name="pdf.png" />
                    <p:dataExporter type="pdf" target="tbl" fileName="data" pageOnly="true" />
                </h:commandLink>
                    
                <p:panelGrid columns="1">
                    <p:dataTable id='tbl' var="animal" value="#{beanAdminRedNeuronal.table}" resizableColumns="true">                           
                        <f:facet name="header">
                            
                        </f:facet>
                        <f:facet name="{Exporters}">
                            <h:commandLink>
                                <p:graphicImage library="images" name="excel.png" width="24"/>
                                <p:dataExporter type="xls" target="tbl" fileName="data" pageOnly="true"/>
                            </h:commandLink>
                            
                            <h:commandLink>
                                <p:graphicImage library="images" name="pdf.png" width="24"/>
                                <p:dataExporter type="pdf" target="tbl" fileName="data" pageOnly="true" />
                            </h:commandLink>
                        </f:facet>
                        
                        <p:columnGroup type="header">
                            <p:row>
                                <p:column rowspan="3" headerText="ID" />
                                <p:column rowspan="2" colspan="6" headerText="Información del animal" />
                                <p:column colspan="9" headerText="Información de la carne" />
                                <p:column rowspan="3" headerText="Calidad" />
                                
                            </p:row>
                            <p:row>                                
                                <p:column colspan="5" headerText="Atributos" />
                                <p:column colspan="4" headerText="Medidas" />
                            </p:row>
                            <p:row>
                                <p:column headerText="Localidad" />
                                <p:column headerText="Grupo Racial" />
                                <p:column headerText="Tipo" />
                                <p:column headerText="Sistema" />
                                <p:column headerText="EDAD" />
                                <p:column headerText="KPV" />
                                
                                <p:column headerText="Conf. canal" />
                                <p:column headerText="Dist. Grasa sub." />
                                <p:column headerText="Cob. Grasa perirrenal" />
                                <p:column headerText="Color Grasa" />
                                <p:column headerText="Color Carne" />
                                
                                <p:column headerText="P. Canal Frio Der. (kg)" />
                                <p:column headerText="P. Canal Frio Izq. (kg)" />
                                <p:column headerText="Ojo Chuleta (cm2)" />
                                <p:column headerText="Grosor Grasa Dorsal (ml)" />
                            </p:row>
                        </p:columnGroup>
                        
                        <p:column>
                            <h:outputText value="#{animal.ID}" />
                        </p:column>
                        
                        <p:column >                                
                            <h:outputText value="#{animal.localidad.descripcion}" />                                
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.grupoRacial.descripcion}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.tipo.descripcion}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.sistema.descripcion}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.edad}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.kpv}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.atri1.descripcion}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.atri2.descripcion}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.atri3.descripcion}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.atri4.descripcion}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.atri5.descripcion}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.pesoCanalFrioDer}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.pesoCanalFrioIzq}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.ojoDeLaChuleta}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.grosorDeGrasaDorsal}" />
                        </p:column>
                        
                        <p:column >
                            <h:outputText value="#{animal.carne.calidad.descripcion}" />
                        </p:column>
                        
                    </p:dataTable>                    
                    <p:commandButton value="Aceptar" oncomplete="PF('DataRed').hide()" />                                      
                </p:panelGrid>                                                                     
            </p:dialog>
            
            <!-- LOCALIDAD -->
            <p:dialog widgetVar="helpLocalidad" header="Localidad" resizable="false" showEffect="clip" hideEffect="clip">
                <h:panelGrid columns="2" cellpadding="5" style="align-content: center">
                    <h:outputText value="Recuerde que para ingresar una nueva localidad debe verificar que el valor no este en la siguiente tabla" />
                    <p:dataTable var="localidad" value="#{beanAdminRedNeuronal.localidades}">
                        <p:column headerText="ID">
                            <h:outputText value="#{localidad.key}" />
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:outputText value="#{localidad.descripcion}" />
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </p:dialog>
            
            <!-- GRUPO RACIAL -->
            <p:dialog widgetVar="helpGrupoRacial" header="Grupo Racial" resizable="false" showEffect="clip" hideEffect="clip">
                <h:panelGrid columns="2" cellpadding="5" style="align-content: center">
                    <h:outputText value="Recuerde que para ingresar un nuevo Grupo Racial debe verificar que el valor no este en la siguiente tabla" />
                    <p:dataTable var="GrupoRacial" value="#{beanAdminRedNeuronal.grupoRaciales}">
                        <p:column headerText="ID">
                            <h:outputText value="#{GrupoRacial.key}" />
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:outputText value="#{GrupoRacial.descripcion}" />
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </p:dialog>
            
            <!-- TIPO -->
            <p:dialog widgetVar="helpTipo" header="Tipo" resizable="false" showEffect="clip" hideEffect="clip">
                <h:panelGrid columns="2" cellpadding="5" style="align-content: center">
                    <h:outputText value="Recuerde que para ingresar un nuevo tipo debe verificar que el valor no este en la siguiente tabla" />
                    <p:dataTable var="tipo" value="#{beanAdminRedNeuronal.tipos}">
                        <p:column headerText="ID">
                            <h:outputText value="#{tipo.key}" />
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:outputText value="#{tipo.descripcion}" />
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </p:dialog>
            
            <!-- SISTEMA -->
            <p:dialog widgetVar="helpSistema" header="Sistema" resizable="false" showEffect="clip" hideEffect="clip">
                <h:panelGrid columns="2" cellpadding="5" style="align-content: center">
                    <h:outputText value="Recuerde que para ingresar un nuevo sistema de alimentación debe verificar que el valor no este en la siguiente tabla" />
                    <p:dataTable var="sistema" value="#{beanAdminRedNeuronal.sistemas}">
                        <p:column headerText="ID">
                            <h:outputText value="#{sistema.key}" />
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:outputText value="#{sistema.descripcion}" />
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </p:dialog>
            
            <!-- CALIDAD -->
            <p:dialog widgetVar="helpCalidad" header="Calidad" resizable="false" showEffect="clip" hideEffect="clip">
                <h:panelGrid columns="2" cellpadding="5" style="align-content: center">
                    <h:outputText value="Recuerde que para ingresar una nueva Calidad debe verificar que el valor no este en la siguiente tabla" />
                    <p:dataTable var="calidad" value="#{beanAdminRedNeuronal.calidades}">
                        <p:column headerText="ID">
                            <h:outputText value="#{calidad.key}" />
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:outputText value="#{calidad.descripcion}" />
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </p:dialog>
            
            
        </h:form>
                <!-- Script para el paso de paginas-->
        <script type="text/javascript">
            function pages(url) {  
                window.location = url;            
            }
        </script>
        
    </body>
    
</html>
